# 传输层

传输层提供了进程间的逻辑通信，传输层向高层用户屏蔽了下面网络层的核心细节，使应用程序看起来像是在两个传输层实体之间有一条端到端的逻辑通信信道。

## TCP

传输控制协议 TCP（Transmission Control Protocol）是面向连接的，提供可靠交付，有流量控制，拥塞控制，提供全双工通信，面向字节流（把应用层传下来的报文看成字节流，把字节流组织成大小不等的数据块），每一条 TCP 连接只能是点对点的（一对一）。

### 三次握手

![](https://images.yingwai.top/picgo/20210718203242.png)

- 首先服务端处于 `LISTEN`（监听）状态，等待客户端的连接请求；
- 第一次握手：客户端发送 SYN 包（seq = x）到服务器，并进入`SYN_SEND`状态，等待服务器确认；
- 第二次握手：服务器收到 SYN包，必须确认客户的 SYN（ack = x+1），同时自己也发送一个 SYN 包（seq = y），即 SYN + ACK 包，此时服务器进入`SYN_RECV`状态;
- 第三次握手：客户端收到服务器的 SYN + ACK 包，向服务器发送确认包 ACK（ack = y+1），此包发送完毕，客户端和服务器进入`ESTABLISHED`状态，完成三次握手。
